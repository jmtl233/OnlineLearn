{"remainingRequest":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\OnlineLearn\\src\\OnlineLearnVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\OnlineLearn\\src\\OnlineLearnVue\\src\\views\\admin\\teacherm\\TeacherManagement.vue?vue&type=style&index=0&id=2484088a&scoped=true&lang=css&","dependencies":[{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\OnlineLearn\\src\\OnlineLearnVue\\src\\views\\admin\\teacherm\\TeacherManagement.vue","mtime":1711621790652},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\OnlineLearn\\src\\OnlineLearnVue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1711182487975},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\OnlineLearn\\src\\OnlineLearnVue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1711182506221},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\OnlineLearn\\src\\OnlineLearnVue\\node_modules\\postcss-loader\\src\\index.js","mtime":1711182496599},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\OnlineLearn\\src\\OnlineLearnVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1711182484313},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\OnlineLearn\\src\\OnlineLearnVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1711182506214}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQouZGVtby10YWJsZS1leHBhbmQgew0KICAgIGZvbnQtc2l6ZTogMDsNCn0NCg0KLmRlbW8tdGFibGUtZXhwYW5kIGxhYmVsIHsNCiAgICB3aWR0aDogOTBweDsNCiAgICBjb2xvcjogIzk5YTliZjsNCn0NCg0KLmRlbW8tdGFibGUtZXhwYW5kIC5lbC1mb3JtLWl0ZW0gew0KICAgIG1hcmdpbi1yaWdodDogMDsNCiAgICBtYXJnaW4tYm90dG9tOiAwOw0KICAgIHdpZHRoOiA1MCU7DQp9DQo="},{"version":3,"sources":["TeacherManagement.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiSA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"TeacherManagement.vue","sourceRoot":"src/views/admin/teacherm","sourcesContent":["<template>\r\n    <div>\r\n        <el-button type=\"primary\" @click=\"addTeacher()\"> 新增教师</el-button><br><br>\r\n        <el-table :data=\"TeacherData\" :default-sort=\"{ prop: 'date', order: 'descending' }\" border style=\"width: 100%\">\r\n            <el-table-column sortable fixed prop=\"account\" label=\"账号\" width=\"180\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"userName\" label=\"名称\" width=\"180\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"sexName\" label=\"性别\" width=\"100\">\r\n            </el-table-column>\r\n            <el-table-column label=\"班级\" prop=\"className\">\r\n            </el-table-column>\r\n            <el-table-column label=\"科目\" prop=\"subjectName\">\r\n            </el-table-column>\r\n\r\n\r\n\r\n            <el-table-column prop=\"createTime\" label=\"入职时间\">\r\n            </el-table-column>\r\n\r\n            <el-table-column label=\"操作\" width=\"260\" fixed=\"right\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-button @click=\"handleEdit(scope.$index, scope.row)\" type=\"success\">\r\n                        编辑\r\n                    </el-button>\r\n                    <el-button @click=\"handleDelete(scope.$index, scope.row)\" type=\"danger\"> \r\n                        删除\r\n                    </el-button>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n\r\n\r\n\r\n        <el-dialog title=\"新增/编辑教师\" :visible.sync=\"dialogFormVisible\">\r\n            <el-form :model=\"form\">\r\n                <el-form-item label=\"教师姓名\" :label-width=\"formLabelWidth\" prop=\"userName\">\r\n                    <el-input v-model=\"form.userEntity.userName\" autocomplete=\"off\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"账号\" :label-width=\"formLabelWidth\" prop=\"account\">\r\n                    <el-input v-model=\"form.userEntity.account\" autocomplete=\"off\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"教师电话\" :label-width=\"formLabelWidth\" prop=\"phone\">\r\n                    <el-input v-model=\"form.userEntity.phone\" autocomplete=\"off\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"教师性别\" :label-width=\"formLabelWidth\" prop=\"sex\">\r\n                    <el-select v-model=\"form.userEntity.sex\" placeholder=\"选择教师性别\">\r\n                        <el-option v-for=\"f in sexAll\" :label=\"f.sexName\" :value=\"f.sex\" :key=\"f.sex\"></el-option>\r\n\r\n                    </el-select>\r\n                </el-form-item>\r\n                <el-form-item label=\"请选择班级\" :label-width=\"formLabelWidth\" prop=\"className\">\r\n                    <el-select v-model=\"form.classId\" placeholder=\"选择班级\">\r\n                        <el-option v-for=\"f in queryCla\" :label=\"f.className\" :value=\"f.id\" :key=\"f.id\"></el-option>\r\n                    </el-select>\r\n                </el-form-item>\r\n                <el-form-item label=\"选择任教科目\" :label-width=\"formLabelWidth\" prop=\"className\">\r\n                    <el-select v-model=\"form.subjectId\" placeholder=\"请选择科目\">\r\n                        <el-option v-for=\"f in AllSubject\" :label=\"f.subjectName\" :value=\"f.id\" :key=\"f.id\"></el-option>\r\n                    </el-select>\r\n                </el-form-item>\r\n\r\n            </el-form>\r\n            <div slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"dialogFormVisible = false\"> 取 消</el-button>\r\n                <el-button type=\"primary\" @click=\"submitadd(form)\"> 确 定</el-button>\r\n            </div>\r\n        </el-dialog>\r\n\r\n\r\n\r\n\r\n        <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page=\"page.pageNum\"\r\n            :page-sizes=\"[10, 20, 30, 40]\" :page-size=\"page.pageSize\" layout=\"total, sizes, prev, pager, next, jumper\"\r\n            :total=\"TeacherData.length\">\r\n        </el-pagination>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { addStudent } from '../../../api/admin/astudent.js'\r\nimport { teacher, deleteTeacher, listSubject, updateSubject } from \"../../../api/admin/teacher.js\";\r\nimport { quclass } from \"../../../api/admin/queryclass\";\r\n\r\nexport default {\r\n    name: \"TeacherManagement\",\r\n    data() {\r\n        return {\r\n            dialogFormVisible: false,\r\n            AllSubject: [],\r\n            form: {\r\n                userEntity: {\r\n                    id: '',\r\n                    userName: '',\r\n                    phone: '',\r\n                    sex: 0,\r\n                    account: ''\r\n                },\r\n                subjectId: '',\r\n                classId: '',\r\n                roleId: 2,\r\n\r\n            },\r\n            sexAll: [\r\n                {\r\n                    sex: 1,\r\n                    sexName: '女'\r\n                },\r\n                {\r\n                    sex: 0,\r\n                    sexName: '男'\r\n                }\r\n            ],\r\n            queryCla: [],\r\n            formLabelWidth: '120px',\r\n            rules: {\r\n                userName: [\r\n                    { required: true, message: '请输入姓名', trigger: 'blur' },\r\n                ],\r\n                phone: [\r\n                    { required: true, message: '请输入电话', trigger: 'change' },\r\n                    { min: 11, max: 11, message: '电话长度为11位', trigger: 'blur' }\r\n                ],\r\n\r\n                sex: [\r\n                    { required: true, message: '选择性别', trigger: 'change' },\r\n                ],\r\n\r\n                account: [\r\n                    { required: true, message: '请输入账号', trigger: 'change' },\r\n                    { min: 11, max: 11, message: '账号长度位8位', trigger: 'blur' }\r\n                ],\r\n\r\n                className: [\r\n                    { required: true, message: '选择班级', trigger: 'change' },\r\n                ],\r\n\r\n\r\n            },\r\n            TeacherData: [],\r\n            page: {\r\n                page: 1, //初始页\r\n                pageSize: 10, //    每页的数据\r\n                roleId: 2\r\n            },\r\n            paramId: {\r\n                id: '',\r\n            },\r\n            param: {\r\n                par: ''\r\n            },\r\n            tag: '123'\r\n        }\r\n    },\r\n\r\n    created() {\r\n        this.homework(this.page)\r\n        this.queryClass(this.param)\r\n        this.listAllSubject()\r\n    },\r\n    methods: {\r\n        addTeacher() {\r\n            this.dialogFormVisible = true\r\n            this.tag = '888'\r\n        },\r\n        handleEdit(index, row) {\r\n            this.dialogFormVisible = true\r\n            this.form.userEntity.id = row.id\r\n            this.form.userEntity.userName = row.userName\r\n            this.form.userEntity.sex = row.sex\r\n            this.form.userEntity.account = row.account\r\n            this.form.userEntity.phone = row.phone\r\n            this.form.subjectId = row.subjectId\r\n            this.form.classId = row.classId\r\n            this.tag = 'edit'\r\n\r\n        },\r\n        listAllSubject() {\r\n            listSubject().then(resp => {\r\n                this.AllSubject = resp.data.resultData\r\n            })\r\n        },\r\n        handleDelete(index, row) {\r\n            this.paramId.id = row.id\r\n            deleteTeacher(this.paramId).then(resp => {\r\n                if (resp.data.code == 200) {\r\n                    this.$message({\r\n                        message: '删除成功 ',\r\n                        type: 'success'\r\n                    });\r\n                    this.homework(this.page)\r\n                } else {\r\n                    this.$message.error('删除失败');\r\n                }\r\n            })\r\n        },\r\n        check(form) {\r\n            if(form.userEntity.userName.trim() == '') {\r\n                this.$message.error('姓名不能为空');\r\n                return false\r\n            }\r\n            if(form.userEntity.phone.trim() == '') {\r\n                this.$message.error('手机号码不能为空');\r\n                return false\r\n            }\r\n            if(form.userEntity.account.trim() == '') {\r\n                this.$message.error('账号不能为空');\r\n                return false\r\n            }\r\n            return true\r\n        },\r\n        submitadd(data1) {\r\n            //进行表单验证\r\n            if(!this.check(data1)) {\r\n                return\r\n            }\r\n            this.dialogFormVisible = false\r\n            console.log(data1, '123')\r\n            if (this.tag == 'edit') {\r\n                updateSubject(data1).then(resp => {\r\n                    if (resp.data.code == 200) {\r\n                        this.homework(this.page)\r\n                        this.$message({\r\n                            message: '编辑成功',\r\n                            type: 'success'\r\n                        });\r\n                    } else {\r\n                        this.$message.error('编辑失败');\r\n                    }\r\n                })\r\n            } else {\r\n                addStudent(data1).then(resp => {\r\n                    if (resp.data.code == 200) {\r\n                        this.homework(this.page)\r\n                        this.$message({\r\n                            message: '新增成功',\r\n                            type: 'success'\r\n                        });\r\n                    } else {\r\n                        this.$message.error('新增失败');\r\n                    }\r\n                })\r\n            }\r\n\r\n        },\r\n        toggleSelection(rows) {\r\n            this.$refs.multipleTable.clearSelection();\r\n        },\r\n        handleSelectionChange(val) {\r\n            console.log(val, '8888')\r\n            console.log(val.length, '8888999')\r\n            for (let i = 0; i < val.length; i++) {\r\n                console.log(val[i].id, '5555')\r\n                this.form.classIds[i] = val[i].id;\r\n            }\r\n\r\n        },\r\n        queryClass(pa) {\r\n            quclass(pa).then(resp => {\r\n                this.queryCla = resp.data.resultData\r\n                console.log(this.queryCla, '7777')\r\n            })\r\n        },\r\n\r\n        handleSizeChange(size) {\r\n            this.page.pageSize = size;\r\n            this.homework(this.page)\r\n            // console.log(this.pageSize,'888')\r\n            console.log(`每页 ${size} 条`);\r\n        },\r\n        handleCurrentChange(pageNum) {\r\n            this.page.pageNum = pageNum;\r\n            this.homework(this.page)\r\n            console.log(`当前页: ${pageNum}`);\r\n        },\r\n\r\n        homework(page) {\r\n            teacher(page).then(resp => {\r\n                this.TeacherData = resp.data.resultData.data\r\n                console.log(resp, '123')\r\n                // state.ClassData=resp.data.data.records\r\n                // this.$store.dispatch('classAction',this.ClassData)\r\n            })\r\n        }\r\n    },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.demo-table-expand {\r\n    font-size: 0;\r\n}\r\n\r\n.demo-table-expand label {\r\n    width: 90px;\r\n    color: #99a9bf;\r\n}\r\n\r\n.demo-table-expand .el-form-item {\r\n    margin-right: 0;\r\n    margin-bottom: 0;\r\n    width: 50%;\r\n}\r\n</style>"]}]}