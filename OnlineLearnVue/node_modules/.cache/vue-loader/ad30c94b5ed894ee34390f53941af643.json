{"remainingRequest":"E:\\OnlineLearn\\OnlineLearnVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\OnlineLearn\\OnlineLearnVue\\src\\views\\admin\\personalInfo\\PersonalInfo.vue?vue&type=style&index=0&id=35aa7325&lang=scss&scoped=true&","dependencies":[{"path":"E:\\OnlineLearn\\OnlineLearnVue\\src\\views\\admin\\personalInfo\\PersonalInfo.vue","mtime":1746890958152},{"path":"E:\\OnlineLearn\\OnlineLearnVue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1711182487975},{"path":"E:\\OnlineLearn\\OnlineLearnVue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1711182506221},{"path":"E:\\OnlineLearn\\OnlineLearnVue\\node_modules\\postcss-loader\\src\\index.js","mtime":1711182496599},{"path":"E:\\OnlineLearn\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\OnlineLearn\\OnlineLearnVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1711182484313},{"path":"E:\\OnlineLearn\\OnlineLearnVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1711182506214}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5hcHAtY29udGFpbmVyIHsNCiAgICBwYWRkaW5nOiAyMHB4Ow0KICAgIG1heC13aWR0aDogMTAwMHB4Ow0KICAgIG1hcmdpbjogMCBhdXRvOw0KfQ0KDQouaW5mby1jYXJkIHsNCiAgICBtYXJnaW4tdG9wOiAyMHB4Ow0KICAgIGJvcmRlci1yYWRpdXM6IDhweDsNCiAgICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlOw0KDQogICAgJjpob3ZlciB7DQogICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMnB4KTsNCiAgICAgICAgYm94LXNoYWRvdzogMCA0cHggMTJweCByZ2JhKDAsIDAsIDAsIDAuMTIpOw0KICAgIH0NCn0NCg0KLmNhcmQtaGVhZGVyIHsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsNCiAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgIHBhZGRpbmc6IDE1cHggMjBweDsNCg0KICAgIC5oZWFkZXItdGl0bGUgew0KICAgICAgICBmb250LXNpemU6IDE4cHg7DQogICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7DQogICAgICAgIGNvbG9yOiAjMmMzZTUwOw0KDQogICAgICAgIGkgew0KICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiA4cHg7DQogICAgICAgICAgICBjb2xvcjogIzQwOUVGRjsNCiAgICAgICAgfQ0KICAgIH0NCn0NCg0KLmVkaXQtYnRuIHsNCiAgICBwYWRkaW5nOiA4cHggMTVweDsNCiAgICBib3JkZXItcmFkaXVzOiA0cHg7DQp9DQoNCjo6di1kZWVwIC5lbC1kZXNjcmlwdGlvbnMgew0KICAgIHBhZGRpbmc6IDE1cHggMjBweDsNCg0KICAgICZfX2xhYmVsIHsNCiAgICAgICAgd2lkdGg6IDEwMHB4Ow0KICAgICAgICBmb250LXdlaWdodDogNTAwOw0KICAgICAgICBjb2xvcjogIzVjNmI3NzsNCiAgICB9DQoNCiAgICAmX19jb250ZW50IHsNCiAgICAgICAgY29sb3I6ICMzMTQ2NTk7DQogICAgfQ0KfQ0KDQouaW5mby1jb250ZW50IHsNCiAgICBmb250LXNpemU6IDE0cHg7DQogICAgY29sb3I6ICM2MDYyNjY7DQp9DQoNCi5pbmZvLXRhZyB7DQogICAgZm9udC1zaXplOiAxM3B4Ow0KICAgIGxldHRlci1zcGFjaW5nOiAwLjVweDsNCn0NCg0KLmdlbmRlci10YWcgew0KICAgIGZvbnQtd2VpZ2h0OiA1MDA7DQogICAgcGFkZGluZzogMCA4cHg7DQp9DQoNCi5kaWFsb2ctZm9vdGVyIHsNCiAgICBwYWRkaW5nOiAyMHB4IDAgMDsNCiAgICB0ZXh0LWFsaWduOiByaWdodDsNCn0NCg0KLmVsLWZvcm0taXRlbSB7DQogICAgbWFyZ2luLWJvdHRvbTogMjJweDsNCg0KICAgICZfX2xhYmVsIHsNCiAgICAgICAgcGFkZGluZy1yaWdodDogMjBweDsNCiAgICB9DQp9DQoNCi5lbC1pbnB1dCB7DQogICAgJl9faW5uZXIgew0KICAgICAgICBwYWRkaW5nLWxlZnQ6IDM1cHg7DQogICAgfQ0KDQogICAgJl9fcHJlZml4IHsNCiAgICAgICAgbGVmdDogMTBweDsNCiAgICAgICAgY29sb3I6ICNjMGM0Y2M7DQogICAgfQ0KfQ0K"},{"version":3,"sources":["PersonalInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgMA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"PersonalInfo.vue","sourceRoot":"src/views/admin/personalInfo","sourcesContent":["<template>\r\n    <div class=\"app-container\">\r\n        <!-- 信息展示卡片 -->\r\n        <el-card class=\"info-card\" shadow=\"hover\">\r\n            <div slot=\"header\" class=\"card-header\">\r\n                <span class=\"header-title\"><i class=\"el-icon-user-solid\"></i> 个人信息</span>\r\n                <el-button\r\n                    type=\"primary\"\r\n                    size=\"small\"\r\n                    icon=\"el-icon-edit\"\r\n                    @click=\"alertpersonal\"\r\n                    class=\"edit-btn\"\r\n                >\r\n                    修改信息\r\n                </el-button>\r\n            </div>\r\n\r\n            <el-descriptions :column=\"2\" border>\r\n                <el-descriptions-item label=\"用户名\">\r\n                    <span class=\"info-content\">{{ Info.userName || '-' }}</span>\r\n                </el-descriptions-item>\r\n                <el-descriptions-item label=\"账号\">\r\n                    <el-tag type=\"info\" class=\"info-tag\">{{ Info.account || '-' }}</el-tag>\r\n                </el-descriptions-item>\r\n                <el-descriptions-item label=\"手机号\">\r\n                    <span class=\"info-content\">{{ Info.phone || '未填写' }}</span>\r\n                </el-descriptions-item>\r\n                <el-descriptions-item label=\"性别\">\r\n                    <el-tag :type=\"Info.sex === 0 ? 'primary' : 'danger'\" class=\"gender-tag\">\r\n                        {{ Info.sex === 0 ? '男' : '女' }}\r\n                    </el-tag>\r\n                </el-descriptions-item>\r\n                <el-descriptions-item label=\"注册时间\" :span=\"2\">\r\n                    <span class=\"info-content\">{{ formatTime(Info.createTime) }}</span>\r\n                </el-descriptions-item>\r\n            </el-descriptions>\r\n        </el-card>\r\n\r\n        <!-- 修改信息对话框 -->\r\n        <el-dialog\r\n            title=\"修改个人信息\"\r\n            :visible.sync=\"dialogFormVisible\"\r\n            width=\"500px\"\r\n            top=\"8vh\"\r\n            @closed=\"resetForm\"\r\n        >\r\n            <el-form\r\n                ref=\"infoForm\"\r\n                :model=\"Info\"\r\n                :rules=\"rules\"\r\n                label-width=\"80px\"\r\n                label-position=\"left\"\r\n            >\r\n                <el-form-item label=\"姓名\" prop=\"userName\">\r\n                    <el-input\r\n                        v-model=\"Info.userName\"\r\n                        placeholder=\"请输入姓名\"\r\n                        clearable\r\n                        prefix-icon=\"el-icon-user\"\r\n                    />\r\n                </el-form-item>\r\n                <el-form-item label=\"账号\">\r\n                    <el-input\r\n                        v-model=\"Info.account\"\r\n                        disabled\r\n                        prefix-icon=\"el-icon-s-opportunity\"\r\n                    />\r\n                </el-form-item>\r\n                <el-form-item label=\"手机号\" prop=\"phone\">\r\n                    <el-input\r\n                        v-model=\"Info.phone\"\r\n                        placeholder=\"请输入手机号\"\r\n                        clearable\r\n                        prefix-icon=\"el-icon-mobile-phone\"\r\n                        maxlength=\"11\"\r\n                    />\r\n                </el-form-item>\r\n            </el-form>\r\n            <div slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n                <el-button\r\n                    type=\"primary\"\r\n                    @click=\"submitForm\"\r\n                    :loading=\"submitLoading\"\r\n                >\r\n                    保 存 更 改\r\n                </el-button>\r\n            </div>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { personal } from '../../../api/personal.js'\r\nimport { listAllClass } from '../../../api/alertpersonal.js'\r\nimport Cookies from 'js-cookie'\r\nimport dayjs from 'dayjs'\r\n\r\nexport default {\r\n    name: \"PersonalInfo\",\r\n    data() {\r\n        // 手机号验证规则\r\n        const validatePhone = (rule, value, callback) => {\r\n            if (!value) return callback(new Error('请输入手机号码'))\r\n            if (!/^1[3-9]\\d{9}$/.test(value)) {\r\n                callback(new Error('请输入正确的手机号码'))\r\n            } else {\r\n                callback()\r\n            }\r\n        }\r\n\r\n        return {\r\n            dialogFormVisible: false,\r\n            submitLoading: false,\r\n            Info: {\r\n                userName: '',\r\n                account: '',\r\n                phone: '',\r\n                sex: 0,\r\n                createTime: ''\r\n            },\r\n            rules: {\r\n                userName: [\r\n                    { required: true, message: '请输入用户名', trigger: 'blur' },\r\n                    { min: 2, max: 10, message: '长度在 2 到 10 个字符', trigger: 'blur' }\r\n                ],\r\n                phone: [\r\n                    { required: true, validator: validatePhone, trigger: 'blur' }\r\n                ]\r\n            }\r\n        }\r\n    },\r\n    created() {\r\n        this.fetchUserInfo()\r\n    },\r\n    methods: {\r\n        // 获取用户信息\r\n        async fetchUserInfo() {\r\n            try {\r\n                const userId = Cookies.get(\"userId\")\r\n                const res = await personal({ id: userId })\r\n                if (res.data.code === 200) {\r\n                    this.Info = res.data.resultData\r\n                }\r\n            } catch (error) {\r\n                console.error('获取用户信息失败:', error)\r\n            }\r\n        },\r\n\r\n        // 格式化时间显示\r\n        formatTime(time) {\r\n            return time ? dayjs(time).format('YYYY-MM-DD HH:mm') : '-'\r\n        },\r\n\r\n        // 打开修改对话框\r\n        alertpersonal() {\r\n            this.dialogFormVisible = true\r\n        },\r\n\r\n        // 提交表单\r\n        async submitForm() {\r\n            try {\r\n                const valid = await this.$refs.infoForm.validate()\r\n                if (!valid) return\r\n\r\n                this.submitLoading = true\r\n                const res = await listAllClass(this.Info)\r\n\r\n                if (res.data.code === 200) {\r\n                    this.$message.success('个人信息更新成功')\r\n                    this.dialogFormVisible = false\r\n                    await this.fetchUserInfo() // 刷新信息\r\n                } else {\r\n                    this.$message.error('更新失败，请稍后重试')\r\n                }\r\n            } catch (error) {\r\n                console.error('提交失败:', error)\r\n                this.$message.error('提交失败，请检查网络')\r\n            } finally {\r\n                this.submitLoading = false\r\n            }\r\n        },\r\n\r\n        // 重置表单\r\n        resetForm() {\r\n            this.$refs.infoForm.resetFields()\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.app-container {\r\n    padding: 20px;\r\n    max-width: 1000px;\r\n    margin: 0 auto;\r\n}\r\n\r\n.info-card {\r\n    margin-top: 20px;\r\n    border-radius: 8px;\r\n    transition: all 0.3s ease;\r\n\r\n    &:hover {\r\n        transform: translateY(-2px);\r\n        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);\r\n    }\r\n}\r\n\r\n.card-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 15px 20px;\r\n\r\n    .header-title {\r\n        font-size: 18px;\r\n        font-weight: 600;\r\n        color: #2c3e50;\r\n\r\n        i {\r\n            margin-right: 8px;\r\n            color: #409EFF;\r\n        }\r\n    }\r\n}\r\n\r\n.edit-btn {\r\n    padding: 8px 15px;\r\n    border-radius: 4px;\r\n}\r\n\r\n::v-deep .el-descriptions {\r\n    padding: 15px 20px;\r\n\r\n    &__label {\r\n        width: 100px;\r\n        font-weight: 500;\r\n        color: #5c6b77;\r\n    }\r\n\r\n    &__content {\r\n        color: #314659;\r\n    }\r\n}\r\n\r\n.info-content {\r\n    font-size: 14px;\r\n    color: #606266;\r\n}\r\n\r\n.info-tag {\r\n    font-size: 13px;\r\n    letter-spacing: 0.5px;\r\n}\r\n\r\n.gender-tag {\r\n    font-weight: 500;\r\n    padding: 0 8px;\r\n}\r\n\r\n.dialog-footer {\r\n    padding: 20px 0 0;\r\n    text-align: right;\r\n}\r\n\r\n.el-form-item {\r\n    margin-bottom: 22px;\r\n\r\n    &__label {\r\n        padding-right: 20px;\r\n    }\r\n}\r\n\r\n.el-input {\r\n    &__inner {\r\n        padding-left: 35px;\r\n    }\r\n\r\n    &__prefix {\r\n        left: 10px;\r\n        color: #c0c4cc;\r\n    }\r\n}\r\n</style>"]}]}