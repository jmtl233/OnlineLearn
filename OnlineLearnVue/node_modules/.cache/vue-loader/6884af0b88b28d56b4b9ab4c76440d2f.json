{"remainingRequest":"E:\\OnlineLearn\\OnlineLearnVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\OnlineLearn\\OnlineLearnVue\\src\\views\\studentweb\\homeworkmanagement\\MarkDownNotHomeWork.vue?vue&type=style&index=0&id=1016be64&scoped=true&lang=css&","dependencies":[{"path":"E:\\OnlineLearn\\OnlineLearnVue\\src\\views\\studentweb\\homeworkmanagement\\MarkDownNotHomeWork.vue","mtime":1746628523366},{"path":"E:\\OnlineLearn\\OnlineLearnVue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1711182487975},{"path":"E:\\OnlineLearn\\OnlineLearnVue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1711182506221},{"path":"E:\\OnlineLearn\\OnlineLearnVue\\node_modules\\postcss-loader\\src\\index.js","mtime":1711182496599},{"path":"E:\\OnlineLearn\\OnlineLearnVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1711182484313},{"path":"E:\\OnlineLearn\\OnlineLearnVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1711182506214}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLnF1ZXN0aW9uLWNvbnRhaW5lciB7DQogICAgbWFyZ2luLWJvdHRvbTogMzBweDsNCn0NCg0KLnF1ZXN0aW9uLWhlYWRlciB7DQogICAgbWFyZ2luLWJvdHRvbTogMjBweDsNCiAgICBwYWRkaW5nLWJvdHRvbTogMTBweDsNCiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VlZTsNCn0NCg0KLnF1ZXN0aW9uLXR5cGUgew0KICAgIGZvbnQtc2l6ZTogMTZweDsNCiAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICBjb2xvcjogIzJjM2U1MDsNCn0NCg0KLnF1ZXN0aW9uLXNjb3JlIHsNCiAgICBjb2xvcjogI2U3NGMzYzsNCiAgICBtYXJnaW4tbGVmdDogMTBweDsNCn0NCg0KLnF1ZXN0aW9uLWNvbnRlbnQgew0KICAgIG1hcmdpbjogMTVweCAwOw0KfQ0KDQouYW5zd2VyLWFyZWEgew0KICAgIG1hcmdpbi10b3A6IDIwcHg7DQogICAgcGFkZGluZzogMTVweCAwOw0KfQ0KDQouY2hvaWNlLW9wdGlvbnMgew0KICAgIHBhZGRpbmc6IDEwcHggMDsNCn0NCg0KLyog5LyY5YyWTWFya2Rvd27pooTop4jmoLflvI8gKi8NCi52LW5vdGUtd3JhcHBlciB7DQogICAgYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7DQogICAgYm94LXNoYWRvdzogbm9uZSAhaW1wb3J0YW50Ow0KfQ0KDQoudi1zaG93LWNvbnRlbnQgew0KICAgIGJhY2tncm91bmQ6IG5vbmUgIWltcG9ydGFudDsNCn0NCg=="},{"version":3,"sources":["MarkDownNotHomeWork.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+IA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"MarkDownNotHomeWork.vue","sourceRoot":"src/views/studentweb/homeworkmanagement","sourcesContent":["<template>\r\n    <div style=\"padding: 20px; height: calc(100vh - 100px); overflow-y: auto\">\r\n        <div style=\"margin-bottom: 20px\">\r\n            <el-button type=\"danger\" @click=\"goOthers()\">返回</el-button>\r\n            <el-button type=\"success\" @click=\"submit()\">提交</el-button>\r\n        </div>\r\n\r\n        <div v-for=\"(question, index) in questions\" :key=\"index\" class=\"question-container\">\r\n            <el-card shadow=\"hover\" style=\"margin-bottom: 20px\">\r\n                <!-- 题目头部 -->\r\n                <div class=\"question-header\">\r\n                    <span class=\"question-type\">{{ getTypeName(question.type) }}</span>\r\n                    <span class=\"question-score\">（{{ question.score }}分）</span>\r\n                </div>\r\n\r\n                <!-- 题目内容 -->\r\n                <div class=\"question-content\">\r\n                    <mavon-editor\r\n                        :value=\"question.content\"\r\n                        :subfield=\"false\"\r\n                        :editable=\"false\"\r\n                        defaultOpen=\"preview\"\r\n                        style=\"z-index: 1\"\r\n                    />\r\n                </div>\r\n\r\n                <!-- 作答区域 -->\r\n                <div class=\"answer-area\">\r\n                    <!-- 单选题 -->\r\n                    <div v-if=\"question.type === 'choice'\" class=\"choice-options\">\r\n                        <el-radio-group v-model=\"answers[index]\">\r\n                            <el-radio\r\n                                v-for=\"(option, oIndex) in question.options\"\r\n                                :key=\"oIndex\"\r\n                                :label=\"String.fromCharCode(65 + oIndex)\"\r\n                                style=\"display: block; margin: 8px 0\"\r\n                            >\r\n                                <span style=\"margin-right: 10px\">{{ String.fromCharCode(65 + oIndex) }}.</span>\r\n                                <el-input :value=\"option\" style=\"width: 300px\" readonly />\r\n                            </el-radio>\r\n                        </el-radio-group>\r\n                    </div>\r\n\r\n                    <!-- 填空题 -->\r\n                    <div v-if=\"question.type === 'blank'\">\r\n                        <el-input\r\n                            v-model=\"answers[index]\"\r\n                            placeholder=\"请在此处填写答案\"\r\n                            style=\"width: 400px\"\r\n                        />\r\n                    </div>\r\n\r\n                    <!-- 问答题 -->\r\n                    <div v-if=\"question.type === 'essay'\">\r\n                        <mavon-editor\r\n                            v-model=\"answers[index]\"\r\n                            :subfield=\"false\"\r\n                            :autofocus=\"false\"\r\n                            style=\"width: 99%\"\r\n                            placeholder=\"请在此处作答...\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </el-card>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Cookies from \"js-cookie\";\r\nimport { doHomework, doExersize } from '../../../api/studentweb/homwork.js'\r\n\r\nexport default {\r\n    name: \"ExamInterface\",\r\n    data() {\r\n        return {\r\n            questions: [],     // 题目列表\r\n            answers: [],       // 学生答案存储\r\n            homdeworkData: {   // 保持原有数据结构\r\n                content: '',\r\n                homeworkId: '',\r\n                exerciseId: '',\r\n                userId: ''\r\n            },\r\n            tag: ''\r\n        }\r\n    },\r\n    created() {\r\n        this.initData();\r\n    },\r\n    methods: {\r\n        initData() {\r\n            this.homdeworkData.userId = Cookies.get('userId');\r\n\r\n            // 假设从路由参数获取的考试数据包含结构化题目\r\n            const examData = this.$route.params.data1;\r\n\r\n            this.questions = examData.questions || [];\r\n            this.homdeworkData.homeworkId = examData.id;\r\n            this.homdeworkData.exerciseId = examData.id;\r\n            this.tag = this.$route.params.data2;\r\n\r\n            // 初始化答案数组\r\n            this.answers = this.questions.map(q => q.studentAnswer || '');\r\n        },\r\n\r\n        getTypeName(type) {\r\n            const typeMap = { choice: '单选题', blank: '填空题', essay: '问答题' }\r\n            return `【${typeMap[type]}】`\r\n        },\r\n\r\n        goOthers() {\r\n            this.$router.go(-1);\r\n        },\r\n\r\n        submit() {\r\n            // 将答案转换为原始接口需要的格式\r\n            this.homdeworkData.content = JSON.stringify({\r\n                questions: this.questions.map((q, index) => ({\r\n                    questionId: q.id,\r\n                    answer: this.answers[index]\r\n                }))\r\n            });\r\n\r\n            const submitApi = this.tag !== '123' ? doExersize : doHomework;\r\n\r\n            submitApi(this.homdeworkData).then(resp => {\r\n                if (resp.data.code === 200) {\r\n                    const successMessage = this.tag !== '123' ? '练习提交成功' : '作业提交成功';\r\n                    const successRoute = this.tag !== '123' ? \"/practicedetail\" : \"/checkhomework\";\r\n\r\n                    this.$message.success(successMessage);\r\n                    this.$router.push(successRoute);\r\n                } else {\r\n                    this.$message.error('提交失败');\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.question-container {\r\n    margin-bottom: 30px;\r\n}\r\n\r\n.question-header {\r\n    margin-bottom: 20px;\r\n    padding-bottom: 10px;\r\n    border-bottom: 1px solid #eee;\r\n}\r\n\r\n.question-type {\r\n    font-size: 16px;\r\n    font-weight: bold;\r\n    color: #2c3e50;\r\n}\r\n\r\n.question-score {\r\n    color: #e74c3c;\r\n    margin-left: 10px;\r\n}\r\n\r\n.question-content {\r\n    margin: 15px 0;\r\n}\r\n\r\n.answer-area {\r\n    margin-top: 20px;\r\n    padding: 15px 0;\r\n}\r\n\r\n.choice-options {\r\n    padding: 10px 0;\r\n}\r\n\r\n/* 优化Markdown预览样式 */\r\n.v-note-wrapper {\r\n    border: none !important;\r\n    box-shadow: none !important;\r\n}\r\n\r\n.v-show-content {\r\n    background: none !important;\r\n}\r\n</style>"]}]}